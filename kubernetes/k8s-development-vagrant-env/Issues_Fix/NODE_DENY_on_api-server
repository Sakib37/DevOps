Issue:
======
# if node authorization is enabled on the api-server



In Api server log
    node_authorizer.go:198] NODE DENY: unknown node "k8s-node-1" cannot get secret
When checking log from pod the following error occurs:
    $ k -n kube-system logs weave-net-67rd6 -c weave -f
    Error from server (Forbidden): Forbidden (user=k8s-server-1-apiserver, verb=get, resource=nodes, subresource=proxy)
    ( pods/log weave-net-67rd6)

SOLUTION:
=========
Apply "system:kube-apiserver-to-kubelet"





Issue:
======
"NODE DENY" for k8s nodes to get secrets from api server. Read
'https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet-tls-bootstrapping/#kube-apiserver-configuration' to
get more info about this problem.

Solution:
=========
set '--enable-bootstrap-token-auth=true' in api-server. Authorize kubelet to create CSR by create the following clusterrolebinding.
NOTE: Kubernetes ships with a ClusterRole with proper permissions for system:node-bootstrapper group.

---
# source: https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet-tls-bootstrapping/#authorize-kubelet-to-create-csr
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: create-csrs-for-bootstrapping
subjects:
- kind: Group
  name: system:bootstrappers
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole
  name: system:node-bootstrapper
  apiGroup: rbac.authorization.k8s.io